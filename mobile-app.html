<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Hockey Stats">
    <meta name="theme-color" content="#185abc">
    
    <title>My Team Hockey Stats</title>
    
    <!-- Cordova CSS -->
    <link rel="stylesheet" type="text/css" href="assets/css/myhockeyStatsStyle.css">
    
    <!-- Mobile App CSS -->
    <style>
        /* Mobile App Specific Styles */
        .app-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        .app-content {
            width: 100%;
            height: 100%;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .app-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #185abc 0%, #2492ff 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 9999;
        }
        
        .app-logo {
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: #185abc;
        }
        
        .app-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-top: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .app-status {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: #185abc;
            z-index: 1000;
        }
        
        .app-header {
            position: fixed;
            top: 20px;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(135deg, #185abc 0%, #2492ff 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .app-content-wrapper {
            margin-top: 80px;
            padding-bottom: 20px;
        }
        
        .app-offline {
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            background: #ff3b30;
            color: white;
            padding: 10px;
            text-align: center;
            z-index: 1000;
        }
        
        .app-network-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 25px;
            background: rgba(0,0,0,0.7);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            z-index: 1000;
        }
        
        .app-network-status.online {
            background: rgba(52,199,89,0.8);
        }
        
        .app-network-status.offline {
            background: rgba(255,59,48,0.8);
        }
    </style>
</head>
<body>
    <!-- App Loading Screen -->
    <div id="app-loading" class="app-loading">
        <div class="app-logo">üèí</div>
        <h2>My Team Hockey Stats</h2>
        <p>Loading your hockey statistics...</p>
        <div class="app-spinner"></div>
    </div>
    
    <!-- App Container -->
    <div id="app-container" class="app-container" style="display: none;">
        <!-- Status Bar -->
        <div class="app-status"></div>
        
        <!-- App Header -->
        <div class="app-header">
            <span id="app-title">My Team Hockey Stats</span>
        </div>
        
        <!-- Offline Indicator -->
        <div id="app-offline" class="app-offline" style="display: none;">
            üì± You're offline. Some features may not be available.
        </div>
        
        <!-- App Content -->
        <div class="app-content">
            <div class="app-content-wrapper">
                <!-- Your existing content will be loaded here -->
                <iframe id="app-iframe" src="index.cfm" width="100%" height="100%" frameborder="0" style="min-height: calc(100vh - 100px); border: none; overflow: hidden;"></iframe>
            </div>
        </div>
        
        <!-- Network Status Indicator -->
        <div id="app-network-status" class="app-network-status">
            üì∂
        </div>
    </div>
    
    <!-- Cordova JavaScript -->
    <script type="text/javascript" src="cordova.js"></script>
    
    <!-- Mobile App JavaScript -->
    <script type="text/javascript">
        // Mobile App Initialization
        document.addEventListener('deviceready', onDeviceReady, false);
        
        function onDeviceReady() {
            console.log('Cordova is ready!');
            
            // Hide loading screen
            document.getElementById('app-loading').style.display = 'none';
            document.getElementById('app-container').style.display = 'block';
            
            // Initialize app features
            initializeApp();
        }
        
        function initializeApp() {
            // Set up status bar
            if (window.StatusBar) {
                StatusBar.overlaysWebView(false);
                StatusBar.backgroundColorByHexString('#185abc');
                StatusBar.styleLightContent();
            }
            
            // Set up network monitoring
            setupNetworkMonitoring();
            
            // Set up app version display
            setupAppVersion();
            
            // Set up haptic feedback
            setupHapticFeedback();
            
            // Set up camera access
            setupCameraAccess();
            
            // Set up file system access
            setupFileSystem();
        }
        
        function setupNetworkMonitoring() {
            function updateNetworkStatus() {
                const networkStatus = document.getElementById('app-network-status');
                const offlineIndicator = document.getElementById('app-offline');
                
                if (navigator.connection) {
                    const connection = navigator.connection;
                    if (connection.type === 'none') {
                        networkStatus.className = 'app-network-status offline';
                        networkStatus.innerHTML = 'üìµ';
                        offlineIndicator.style.display = 'block';
                    } else {
                        networkStatus.className = 'app-network-status online';
                        networkStatus.innerHTML = 'üì∂';
                        offlineIndicator.style.display = 'none';
                    }
                }
            }
            
            // Check network status on load
            updateNetworkStatus();
            
            // Monitor network changes
            if (navigator.connection) {
                navigator.connection.addEventListener('change', updateNetworkStatus);
            }
        }
        
        function setupAppVersion() {
            if (window.cordova && window.cordova.getAppVersion) {
                cordova.getAppVersion.getVersionNumber(function(version) {
                    console.log('App Version: ' + version);
                });
            }
        }
        
        function setupHapticFeedback() {
            // Add haptic feedback to buttons
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('ios-haptic') || e.target.classList.contains('ios-button')) {
                    if (navigator.vibrate) {
                        navigator.vibrate(50); // Short vibration
                    }
                }
            });
        }
        
        function setupCameraAccess() {
            // Camera access for profile pictures
            window.takePicture = function() {
                if (navigator.camera) {
                    navigator.camera.getPicture(
                        function(imageData) {
                            // Handle successful image capture
                            console.log('Picture taken: ' + imageData);
                        },
                        function(error) {
                            console.log('Camera error: ' + error);
                        },
                        {
                            quality: 50,
                            destinationType: Camera.DestinationType.DATA_URL,
                            sourceType: Camera.PictureSourceType.CAMERA
                        }
                    );
                }
            };
        }
        
        function setupFileSystem() {
            // File system access for data export
            window.exportData = function(data, filename) {
                if (window.cordova && window.cordova.file) {
                    // Export to device storage
                    console.log('Exporting data: ' + filename);
                } else {
                    // Fallback to browser download
                    const blob = new Blob([data], { type: 'text/plain' });
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename;
                    a.click();
                    window.URL.revokeObjectURL(url);
                }
            };
        }
        
        // Handle app lifecycle events
        document.addEventListener('pause', function() {
            console.log('App paused');
        });
        
        document.addEventListener('resume', function() {
            console.log('App resumed');
        });
        
        // Handle back button (Android)
        document.addEventListener('backbutton', function(e) {
            e.preventDefault();
            // Handle back button press
            if (confirm('Are you sure you want to exit the app?')) {
                navigator.app.exitApp();
            }
        });
        
        // Handle menu button (Android)
        document.addEventListener('menubutton', function() {
            // Handle menu button press
            console.log('Menu button pressed');
        });
        
        // Handle search button (Android)
        document.addEventListener('searchbutton', function() {
            // Handle search button press
            console.log('Search button pressed');
        });
    </script>
</body>
</html>
